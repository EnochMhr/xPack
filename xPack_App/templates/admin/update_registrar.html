{% include 'header.html' %}

{% block content%}
   <div class="container-fluid">
                    <div class="mb-3">
                        <h3 class="fw-bold fs-4 mb-3">Manage Devices</h3>
                         <ol class="breadcrumb mb-4">
                            <li class="breadcrumb-item"><a href="{% url  'dashboard'%}">Dashboard</a></li>
                            <li class="breadcrumb-item"><a href="{% url  'devices'%}">Manage Devices</a></li>
                            <li class="breadcrumb-item active">Edit Registrar Profile</li>
                        </ol>
                    </div>

                    {% if submitted %}
                        <div class="alert alert-success" role="alert">
                            Registrar Info updated successfully!
                        </div>

                    {% else %}
                        <h3 class="text-center mb-4">Edit Registrar Profile</h3>
                        <div class="shadow mt-3 p-5 mx-auto" style="width: 800px;">
                            <form action="" method="POST">
                                {% csrf_token %}

                                {{form.as_p}}
                                <div class="gen-button text-white mt-2 text-center" id="generate_pwd_btn_reg">Generate</div>

                                <div class="d-flex justify-content-center align-items-center">
                                    <input type="submit" value="Save Info" class="reg px-5" >
                                </div>

                            </form>
                        </div>
                    {% endif %}

{% endblock%}

<script>
        new DataTable('#example',{ lengthMenu: [5, 10, 25, 50, -1]});
    </script>

    <script>
            const reg_gen_pwd = document.getElementById("generate_pwd_btn_reg");
        
            const reg_gen_input = document.getElementById("user_pwd_reg");

            gen(reg_gen_pwd, reg_gen_input)

        function gen(genbtn, genInput) {
        if (genbtn) {
            genbtn.addEventListener("click", function () {
            const characters =
                "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
            const passwordLength = 8;
            let password = "";

            for (let i = 0; i < passwordLength; i++) {
                const randomIndex = Math.floor(Math.random() * characters.length);
                password += characters[randomIndex];
            }

            //input that stores generated pwd
            console.log(password)
                genInput.value = password;
            
            });

 
            }
            }
            </script>

{% include 'footer.html' %}