{% load static %}

<!DOCTYPE html>
<html lang="en" data-bs-theme = "" id="htmlpage">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}xPack{% endblock %}</title>
    <link href='https://cdn.boxicons.com/fonts/basic/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.14.0/build/css/alertify.min.css"/>
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.14.0/build/css/themes/bootstrap.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css"/>
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">

    
</head>
<body>
    <div class="wrapper">
        <aside id="sidebar">
            <div class="d-flex justify-content-between p-4">
                <div class="sidebar-logo">
                    <span>
                        <i class='bx  bx-gift logo-gift'  ></i> 
                    </span>
                    <a href="">xPack</a>
                </div>
                <button class="toggle-btn border-0 ms-2" type="button">
                    <i id="icon" class='bx  bx-chevrons-right'  ></i>  
                </button>
            </div>

            <ul class="sidebar-nav">
                <li class="sidebar-item">
                    <a href="{% url 'admin_dashboard' %}" class="sidebar-link">
                        <div class="d-flex align-items-center">
                            <i class='bx bx-dashboard-alt  '></i>
                            <span>Dashboard</span>
                        </div>
                    </a>
                </li>
                <li class="sidebar-item">
                    <a href="{% url 'registry' %}" class="sidebar-link">
                        <div class="d-flex align-items-center">
                            <i class='bx bx-database  '></i>
                            <span>Registry</span>
                        </div>
                    </a>
                </li>
                <li class="sidebar-item">
                    <a href="{% url 'devices' %}" class="sidebar-link">
                        <div class="d-flex align-items-center">
                            <i class='bx bx-cog  '></i>
                            <span>Manage Devices</span>
                        </div>
                    </a>
                </li>
                <li class="sidebar-item">
                    <a href="{% url 'stats' %}" class="sidebar-link">
                        <div class="d-flex align-items-center">
                            <i class='bx bx-chart-trend  '></i>
                            <span>Stats & Analyses</span>
                        </div>
                    </a>
                </li>
                <li class="sidebar-item">
                     <a href="" class="sidebar-link">
                       <div class="d-flex align-items-center">
                            <i class='bx bx-toggle-left  '></i>
                            <span>Dark Theme</span>
                        </div>
                    </a>
                </li>
                <li class="sidebar-item">
                    <a href="#" class="sidebar-link">
                        <div class="d-flex align-items-center">
                            <i class='bx bx-history  '></i>
                            <span>Activity Log</span>
                        </div>
                    </a>
                </li>
            </ul>
            <div class="sidebar-footer">
                <a href="{% url 'dash_tech' %}" class="sidebar-link">
                    <div class="d-flex align-items-center">
                            <i class='bx bx-help-octagon  '></i>
                            <span>Tech Support</span>
                        </div>
                </a>
            </div>
        </aside>

        <div class="main">
            <nav class="navbar navbar-expand px-4 py-3">
                <form action="" class="d-none d-sm-inline-block">
                    <div class="input-group input-group-navbar">
                        <input type="text" class="form-control border-0 rounded-0 pe-0 focus-ring focus-ring-light" name="search" placeholder="Search..." aria-label="Search">
                        <button class="btn border-0 rounded-0" type="button">
                            <i class='bxr bx-search  '></i>
                        </button>
                    </div>
                </form>
                <div class="navbar-collapse collapse">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item dropdown">
                            <a href="" data-bs-toggle="dropdown" class="nav-icon pe-md-0">
                                <img src="{% static 'images/icons/user.png' %}" alt="avatar" srcset="" class="avatar img-fluid">
                            </a>
                            <div class="dropdown-menu dropdown-menu-end rounded-0 border-0 shadow mt-3">
                                <a href="{% url 'account' %}" class="dropdown-item">
                                    <div class="d-flex align-items-center">
                                        <i class='bx bx-edit  '></i>
                                        <span class="ms-2">My Account</span>
                                    </div>
                                </a>
                                <a href="{% url 'logout' %}" class="dropdown-item">
                                    <div class="d-flex align-items-center">
                                        <i class='bxr bx-arrow-out-left-square-half'></i>
                                        <span class="ms-2">Logout</span>
                                    </div>
                                </a>

                                </a>
                                <div class="dropdown-divider"></div>

                                <a href="" class="dropdown-item">
                                     <div class="d-flex align-items-center">
                                        <i class='bxr  bx-message-circle-question-mark'  ></i>  
                                        <span class="ms-2">Help Center</span>
                                    </div>
                                </a>
                            </div>
                        </li>
                    </ul>
                </div>
            </nav> 

             <main class="content px-3 py-4">
               {% block content %}

               {% endblock%}

                
            </main> 


               <footer class="footer">
                <div class="container-fluid">
                    <div class="row text-body-secondary">
                        <div class="col-6 text-start d-flex">
                            <a href="" class="text-body-secondary text-decoration-none">
                                <strong>xPack <sup>&copy;</sup></strong>
                            </a>

                            <p class="mx-2 d-none d-md-block">|</p>

                            <span class="opt d-none d-md-block">a product of mHrTech</span>
                        </div>

                         <div class="col-6 text-end text-body-secondary d-none d-md-block">

                           <ul class="list-inline mb-0 opt">
                                <li class="list-inline-item">
                                    <a href="" class="text-body-secondary">Contact</a>
                                </li>

                                <li class="list-inline-item">
                                    <a href="" class="text-body-secondary">About</a>
                                </li>

                                <li class="list-inline-item">
                                    <a href="" class="text-body-secondary">Terms & Conditions</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </footer>
        </div>
    </div>




    {# Hidden elements to store messages for JS processing #}
    {% if messages %}
        {% for message in messages %}
            <div hidden
                data-message="{{ message|escapejs }}"
                data-message-type="{% if message.tags == 'error' %}error{% elif message.tags == 'success' %}success{% else %}info{% endif %}">
            </div>
        {% endfor %}
    {% endif %}

    <!-- Core JS Dependencies -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"></script>

    <!-- Plugin JS -->
    <script src="https://cdn.jsdelivr.net/npm/alertifyjs@1.14.0/build/alertify.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.7/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.7/js/dataTables.bootstrap5.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>

    <!-- Custom Scripts -->
    <script src="{% static 'js/notifications.js' %}"></script>
    <script src="{% static 'js/scripts.js' %}"></script>

    {% block extra_scripts %}{% endblock %}

    <script>
        // make sure the alert msg works bro
        // {% for flashmsg in messages %}
        //     alertify.set('notifier','position', 'top-right');
        //     alertify.success('{{flashmsg|escapejs}}');
        // {% endfor %}
    </script>

     <script>
            const reg_gen_pwd = document.getElementById("generate_pwd_btn_reg");
        
            const reg_gen_input = document.getElementById("user_pwd_reg");

            gen(reg_gen_pwd, reg_gen_input)

        function gen(genbtn, genInput) {
        if (genbtn) {
            genbtn.addEventListener("click", function () {
            const characters =
                "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
            const passwordLength = 8;
            let password = "";

            for (let i = 0; i < passwordLength; i++) {
                const randomIndex = Math.floor(Math.random() * characters.length);
                password += characters[randomIndex];
            }

            //input that stores generated pwd
            console.log(password)
                genInput.value = password;
            
            });

            }
            }
            </script>

</body>
</html>